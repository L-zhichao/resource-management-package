(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b9c79dc0"],{"2a64":function(e,t,a){"use strict";var l=a("3683"),s=a.n(l);s.a},3683:function(e,t,a){},cc71:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"overflow-y":"scroll"},style:{"max-height":this.timeLineHeight+"px"}},[e.showResultPage?a("div",[a("el-card",[a("h3",{attrs:{slot:"header"},slot:"header"},[e._v("查询结果：")]),a("div",{staticClass:"result-content"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form",{attrs:{"label-position":"top"}},[a("el-form-item",{attrs:{label:"结果信息"}},[a("el-table",{key:e.randomKey,attrs:{data:e.result,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"ID",prop:"id"}}),a("el-table-column",{attrs:{align:"center",label:"资产",prop:"asset"}}),a("el-table-column",{attrs:{align:"center",label:"资产价值",prop:"assetValue"}}),a("el-table-column",{attrs:{align:"center",label:"是否可支配(是/否)",prop:"judge"}}),a("el-table-column",{attrs:{align:"center",label:"创建时间",prop:"updateTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),e._v(" "),a("span",{staticStyle:{"margin-left":"5px"},domProps:{textContent:e._s(e.formatDateTime(t.row.updateTime))}})]}}])})],1)],1)],1)],1)],1)],1)]),a("el-button",{staticStyle:{"margin-top":"10px"},attrs:{icon:"el-icon-arrow-left",type:"primary"},on:{click:e.goBack}},[e._v(" 返回 ")])],1):a("div",[a("div",{staticStyle:{padding:"5px 20px"}},[a("br"),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.listQuery}},[a("el-radio-group",{staticStyle:{"margin-bottom":"10px"},attrs:{fill:"#c0bce9"},model:{value:e.searchType,callback:function(t){e.searchType=t},expression:"searchType"}},[a("el-radio-button",{attrs:{label:"id"}},[e._v("根据ID查询")]),a("el-radio-button",{attrs:{label:"asset"}},[e._v("根据资产名称查询")])],1),a("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"请输入查询内容"},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.search}},[e._v(" 查询 ")]),a("el-form-item",[e.userAdministratorPermissions?a("el-button",{staticStyle:{"margin-left":"50px"},attrs:{icon:"el-icon-edit",type:"success"},on:{click:e.TJCollectionForm}},[e._v("添加")]):e._e(),a("el-button",{staticStyle:{"margin-left":"50px"},attrs:{icon:"el-icon-edit",type:"warning"},on:{click:e.getCanBeUsed}},[e._v("查看所有可支配资产")])],1),a("span",{staticClass:"spanAllAssetValue"},[e._v("总计"+e._s(e.allAssetValue)+"元")])],1),a("el-table",{key:e.randomKey,attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55px"}}),a("el-table-column",{attrs:{align:"center",label:"id",prop:"id"}}),a("el-table-column",{attrs:{align:"center",label:"资产",prop:"asset"}}),a("el-table-column",{attrs:{align:"center",label:"资产价值",prop:"assetValue"}}),a("el-table-column",{attrs:{align:"center",label:"是否可支配(是/否)",prop:"judge"}}),a("el-table-column",{attrs:{align:"center",label:"创建时间",prop:"updateTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),e._v(" "),a("span",{staticStyle:{"margin-left":"5px"},domProps:{textContent:e._s(e.formatDateTime(t.row.updateTime))}})]}}],null,!1,2626662190)}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改",placement:"top"}},[e.userAdministratorPermissions?a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.BJCollectionForm(t.row)}}}):e._e()],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[e.userAdministratorPermissions?a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.deleteVisible(t)}}}):e._e()],1)]}}],null,!1,102209070)}),e.userAdministratorPermissions&&e.selection.length>0?a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.batchDelete}},[e._v(" 批量删除 ")]):e._e()],1),a("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[10],"page-size":e.listQuery.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total,background:!0},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"collectionform",attrs:{rules:e.rules,model:e.ruleForm,"label-width":"120px","label-position":"left"}},["create"===e.dialogStatus?a("el-form-item",{attrs:{label:"资产",prop:"asset"}},[a("el-input",{attrs:{placeholder:"资产"},model:{value:e.ruleForm.asset,callback:function(t){e.$set(e.ruleForm,"asset",t)},expression:"ruleForm.asset"}})],1):e._e(),"create"===e.dialogStatus?a("el-form-item",{attrs:{label:"资产价值",prop:"assetValue"}},[a("el-input",{attrs:{placeholder:"资产价值"},model:{value:e.ruleForm.assetValue,callback:function(t){e.$set(e.ruleForm,"assetValue",t)},expression:"ruleForm.assetValue"}})],1):e._e(),"create"===e.dialogStatus?a("el-form-item",{attrs:{label:"是否可支配",prop:"judge"}},[a("el-select",{attrs:{placeholder:"是否可支配"},model:{value:e.ruleForm.judge,callback:function(t){e.$set(e.ruleForm,"judge",t)},expression:"ruleForm.judge"}},[a("el-option",{attrs:{label:"是",value:"是"}}),a("el-option",{attrs:{label:"否",value:"否"}})],1)],1):e._e(),"update"===e.dialogStatus?a("el-form-item",{attrs:{label:"资产",prop:"asset"}},[a("el-input",{attrs:{placeholder:"资产"},model:{value:e.ruleForm.asset,callback:function(t){e.$set(e.ruleForm,"asset",t)},expression:"ruleForm.asset"}})],1):e._e(),"update"===e.dialogStatus?a("el-form-item",{attrs:{label:"资产价值",prop:"assetValue"}},[a("el-input",{attrs:{placeholder:"资产价值"},model:{value:e.ruleForm.assetValue,callback:function(t){e.$set(e.ruleForm,"assetValue",t)},expression:"ruleForm.assetValue"}})],1):e._e(),"update"===e.dialogStatus?a("el-form-item",{attrs:{label:"是否可支配",prop:"judge"}},[a("el-select",{attrs:{placeholder:"是否可支配"},model:{value:e.ruleForm.judge,callback:function(t){e.$set(e.ruleForm,"judge",t)},expression:"ruleForm.judge"}},[a("el-option",{attrs:{label:"是",value:"是"}}),a("el-option",{attrs:{label:"否",value:"否"}})],1)],1):e._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),"create"===e.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitCollectionForm("collectionform")}}},[e._v("添 加")]):a("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.updateCollectionForm("collectionform")}}},[e._v("修 改")])],1)],1)],1)])])},s=[],o=(a("99af"),a("d81d"),a("fb6a"),a("5530")),r=(a("96cf"),a("1da1")),n=a("bc3a"),i=a.n(n),c=a("c276"),u=a("365c"),d={name:"fundManagement",data:function(){return{allAssetValue:0,randomKey:Math.random(),searchType:"id",searchValue:"",result:[],showResultPage:!1,searchByName:!1,searchById:!1,selection:[],timeLineHeight:"",listLoading:!0,list:[],total:0,listQuery:{page:1,pageSize:10},dialogFormVisible:!1,dialogStatus:"create",textMap:{update:"修改资产",create:"添加资产"},ruleForm:{id:"",asset:"",assetValue:"",judge:"",updateTime:""},rules:{assetValue:[{required:!0,message:"请输入资产数目",trigger:"blur"}],asset:[{required:!0,message:"请输入资产",trigger:"blur"}],judge:[{required:!0,message:"请选择是否可支配",trigger:"blur"}]},userAdministratorPermissions:"0"===c["a"].cookies.get("userStatus")||!1}},created:function(){this.axiosdata()},mounted:function(){var e=this;this.timeLineHeight=document.documentElement.clientHeight-210,window.onresize=function(){e.timeLineHeight=document.documentElement.clientHeight-210},this.fundsVoShowAllFunds()},methods:{fundsVoShowAllFundsAPI:function(){return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].FUNDSVO_SHOW_ALL_FUNDS_API();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},fundsVoShowAllFunds:function(){var e=this;this.fundsVoShowAllFundsAPI().then((function(t){e.allAssetValue=t}))},formatDateTime:function(e){var t=new Date(e),a=t.getFullYear(),l=("0"+(t.getMonth()+1)).slice(-2),s=("0"+t.getDate()).slice(-2),o=("0"+t.getHours()).slice(-2),r=("0"+t.getMinutes()).slice(-2),n=("0"+t.getSeconds()).slice(-2);return"".concat(a,"-").concat(l,"-").concat(s," ").concat(o,":").concat(r,":").concat(n)},handleSizeChange:function(e){this.listQuery.pageSize=e,this.axiosdata()},handleCurrentChange:function(e){this.listQuery.page=e,this.axiosdata()},onSubmitSelect:function(){this.listQuery.page=1,this.axiosdata()},axiosdata:function(){var e=this;this.listLoading=!0,i.a.get("http://49.234.57.15:8080/fundsVo/page",{params:Object(o["a"])(Object(o["a"])({},this.listQuery),{},{randomKey:this.randomKey}),headers:{"Content-Type":"application/json"}}).then((function(t){e.listLoading=!1,e.list=t.data.data.records,e.total=t.data.data.total})).catch((function(e){console.log(e)}))},TJCollectionForm:function(){Object.assign(this.$data.ruleForm,this.$options.data().ruleForm),this.dialogStatus="create",this.dialogFormVisible=!0,this.randomKey=Math.random()},BJCollectionForm:function(e){this.dialogStatus="update",this.dialogFormVisible=!0,this.ruleForm={id:e.id,asset:e.asset,assetValue:e.assetValue,judge:e.judge,updateTime:e.updateTime}},submitCollectionForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var a="http://49.234.57.15:8080/fundsVo/update";i.a.post(a,t.ruleForm).then((function(e){200===e.data.status?(t.randomKey=Math.random(),t.axiosdata(),t.dialogFormVisible=!1,t.$message.success("create"===t.dialogStatus?"添加数据成功！":"修改数据成功！")):t.$message.error("create"===t.dialogStatus?"添加数据失败！":"修改数据失败！")})).catch((function(e){console.error(e)}))}))},updateCollectionForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var a="http://49.234.57.15:8080/fundsVo/update";i.a.post(a,t.ruleForm).then((function(e){200===e.data.status?(t.randomKey=Math.random(),t.axiosdata(),t.dialogFormVisible=!1,t.$message.success("update"===t.dialogStatus?"添加数据成功！":"修改数据成功！")):t.$message.error("update"===t.dialogStatus?"添加数据失败！":"修改数据失败！")})).catch((function(e){console.error(e)}))}))},handleSelectionChange:function(e){this.selection=e},deleteVisible:function(e){var t=this;this.$confirm("确定要删除"+e.row.asset+"吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=e.row.id;i.a.delete("http://49.234.57.15:8080/fundsVo/"+a).then((function(e){200===e.data.status?(t.axiosdata(),t.dialogFormVisible=!1,t.$message.success("删除完毕")):t.$message.error("删除数据失败！")})).catch((function(e){console.error(e)}))})).catch((function(){}))},batchDelete:function(){var e=this,t=this.selection.map((function(e){return e.id}));i.a.post("http://49.234.57.15:8080/fundsVo/batch",t).then((function(){e.$message.success("批量删除成功"),e.selection=[],e.axiosdata()})).catch((function(t){console.error(t),e.$message.error("批量删除失败")}))},search:function(){var e=this,t="";if("id"===this.searchType)t="http://49.234.57.15:8080/fundsVo/fundsVo/".concat(this.searchValue),i.a.get(t).then((function(t){e.result[0]=t.data.data,e.randomKey=Math.random(),e.showResultPage=!0,e.searchById=!0,e.searchByName=!1})).catch((function(e){console.error(e)}));else{if("asset"!==this.searchType)return void console.error("Invalid search criteria");t="http://49.234.57.15:8080/fundsVo/fundsVo/byName?name=".concat(this.searchValue),i.a.get(t).then((function(t){e.result[0]=t.data.data,e.randomKey=Math.random(),e.showResultPage=!0,e.searchById=!1,e.searchByName=!0})).catch((function(e){console.error(e)}))}},goBack:function(){this.showResultPage=!1,this.searchValue="",this.searchType="id",this.axiosdata()},getCanBeUsed:function(){this.$router.push("/getCanBeUsed")}}},m=d,p=(a("2a64"),a("2877")),h=Object(p["a"])(m,l,s,!1,null,null,null);t["default"]=h.exports}}]);