(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21e9101c","chunk-6d6a0215","chunk-2d208fb9"],{2973:function(e,r,t){},3547:function(e,r,t){"use strict";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"page-login"},[t("div",{staticClass:"page-login--layer page-login--layer-area"},[t("ul",{staticClass:"circles"},e._l(10,(function(e){return t("li",{key:e})})),0)]),t("div",{staticClass:"page-login--layer page-login--layer-time",attrs:{flex:"main:center cross:center"}},[e._v(" "+e._s(e.time)+" ")]),t("div",{staticClass:"page-login--layer"},[t("div",{staticClass:"page-login--content",attrs:{flex:"dir:top main:justify cross:stretch box:justify"}},[e._m(0),t("div",{staticClass:"page-login--content-main",attrs:{flex:"dir:top main:center cross:center"}},[t("p",{style:{color:"#00000099",fontSize:"36px",marginTop:"-5em"}},[e._v("资源管理系统")]),t("div",{staticClass:"page-login--form"},[t("el-card",{attrs:{shadow:"never"}},[t("el-form",{ref:"loginForm",attrs:{"label-position":"top",rules:e.rules,model:e.formLogin,size:"default"}},[this.registerRules?t("el-form-item",{attrs:{prop:"name"}},[t("el-input",{attrs:{type:"text",placeholder:"姓名"},model:{value:e.formLogin.name,callback:function(r){e.$set(e.formLogin,"name",r)},expression:"formLogin.name"}},[t("i",{staticClass:"fa fa-user-circle-o",attrs:{slot:"prepend"},slot:"prepend"})])],1):e._e(),t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{type:"text",placeholder:"用户名"},on:{blur:e.usernameReply},model:{value:e.formLogin.username,callback:function(r){e.$set(e.formLogin,"username",r)},expression:"formLogin.username"}},[t("i",{staticClass:"fa fa-user-circle-o",attrs:{slot:"prepend"},slot:"prepend"})])],1),this.registerRules?t("el-form-item",{attrs:{prop:"email"}},[t("el-input",{attrs:{type:"text",placeholder:"邮箱"},model:{value:e.formLogin.email,callback:function(r){e.$set(e.formLogin,"email",r)},expression:"formLogin.email"}},[t("i",{staticClass:"el-icon-takeaway-box",attrs:{slot:"prepend"},slot:"prepend"})])],1):e._e(),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.formLogin.password,callback:function(r){e.$set(e.formLogin,"password",r)},expression:"formLogin.password"}},[t("i",{staticClass:"fa fa-keyboard-o",attrs:{slot:"prepend"},slot:"prepend"})])],1),this.registerRules?t("el-form-item",{attrs:{prop:"passwordVerify"}},[t("el-input",{attrs:{type:"password",placeholder:"再次输入密码"},model:{value:e.formLogin.passwordVerify,callback:function(r){e.$set(e.formLogin,"passwordVerify",r)},expression:"formLogin.passwordVerify"}},[t("i",{staticClass:"fa fa-keyboard-o",attrs:{slot:"prepend"},slot:"prepend"})])],1):e._e(),e._e(),e._e(),t("el-button",{staticClass:"button-login",attrs:{size:"default",type:"primary"},on:{click:e.submit}},[e._v(" "+e._s(e.registerChoose[1])+" ")])],1)],1),t("p",{staticClass:"page-login--options",attrs:{flex:"main:justify cross:center"}},[e._e(),t("span",{on:{click:e.registerChange}},[e._v(e._s(e.registerChoose[0]))])]),e._e()],1)]),t("div",{staticClass:"page-login--content-footer"},[t("p",{staticClass:"page-login--content-footer-locales"},e._l(e.$languages,(function(r){return t("a",{key:r.value,on:{click:function(t){return e.onChangeLocale(r.value)}}},[e._v(" "+e._s(r.label)+" ")])})),0),t("p",{staticClass:"page-login--content-footer-copyright"},[e._v(" Copyright "),t("d2-icon",{attrs:{name:"copyright"}}),e._v(" 2018 D2 Projects 开源组织出品 "),t("a",{attrs:{href:"https://github.com/FairyEver"}},[e._v(" @FairyEver ")])],1),e._m(1)])])]),t("el-dialog",{attrs:{title:"快速选择用户",visible:e.dialogVisible,width:"400px"},on:{"update:visible":function(r){e.dialogVisible=r}}},[t("el-row",{staticStyle:{margin:"-20px 0px -10px 0px"},attrs:{gutter:10}},e._l(e.users,(function(r,s){return t("el-col",{key:s,attrs:{span:8}},[t("div",{staticClass:"page-login--quick-user",on:{click:function(t){return e.handleUserBtnClick(r)}}},[t("d2-icon",{attrs:{name:"user-circle-o"}}),t("span",[e._v(e._s(r.name))])],1)])})),1)],1)],1)},a=[function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"page-login--content-header"},[s("p",{staticClass:"page-login--content-header-motto"},[s("img",{attrs:{src:t("a6b0")}})])])},function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("p",{staticClass:"page-login--content-footer-options"},[t("a",{attrs:{href:"#"}},[e._v("帮助")]),t("a",{attrs:{href:"#"}},[e._v("隐私")]),t("a",{attrs:{href:"#"}},[e._v("条款")])])}],i=(t("b0c0"),t("ac1f"),t("5319"),t("53ca")),n=(t("96cf"),t("1da1")),o=t("5530"),l=t("5a0c"),u=t.n(l),m=t("2f62"),c=t("1353"),g=t("365c"),p={mixins:[c["a"]],data:function(){var e=this,r=function(r,t,s){return t?t!==e.formLogin.password?s(new Error("两次输入密码不一致")):void s():s(new Error("请输入密码"))};return{timeInterval:null,time:u()().format("HH:mm:ss"),dialogVisible:!1,users:[{name:"Admi",username:"Admin111",password:"Admin111"},{name:"Edit",username:"editor11",password:"editor11"},{name:"User",username:"User1111",password:"User1111"}],options:[{value:"0",label:"管理员"},{value:"1",label:"普通成员"}],formLogin:{username:"",password:"",passwordVerify:"",name:"",userStatue:null,email:"",code:"v9am"},registerRules:!1,registerChoose:["注册账户","登录"],rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:4,message:"长度在 2 到 4 个字符",trigger:"blur"},{required:!0,pattern:/^[\u4e00-\u9fa5_a-zA-Z0-9.·-]+$/,message:"不支持特殊字符",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"},{required:!0,pattern:/^[a-zA-Z0-9]{6,10}$/,message:"只能为包含数字,字母,下划线的6-10个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{required:!0,pattern:/^([a-zA-Z0-9]+[_|_|.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|_|.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/,message:"请输入正确的邮箱格式",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,max:16,message:"长度在 8 到 16 个字符",trigger:"blur"},{required:!0,pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,16}$/,message:"至少1个大写字母,1个小写字母和1个数字",trigger:"blur"}],passwordVerify:[{required:!0,message:"请再次输入密码",trigger:"blur"},{min:8,max:16,message:"长度在 8 到 16 个字符",trigger:"blur"},{required:!0,pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,16}$/,message:"至少1个大写字母,1个小写字母和1个数字",trigger:"blur"},{required:!0,validator:r,trigger:"blur"}],userStatue:[{required:!1,message:"请选择权限",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]}}},mounted:function(){var e=this;this.timeInterval=setInterval((function(){e.refreshTime()}),1e3)},beforeDestroy:function(){clearInterval(this.timeInterval)},methods:Object(o["a"])(Object(o["a"])({},Object(m["b"])("d2admin/account",["login"])),{},{refreshTime:function(){this.time=u()().format("HH:mm:ss")},handleUserBtnClick:function(e){this.formLogin.username=e.username,this.formLogin.password=e.password,this.submit()},registerChange:function(){this.$refs.loginForm.clearValidate(),this.formLogin={username:"",password:"",passwordVerify:"",name:"",userStatue:1,email:"",code:"v9am"},!0===this.registerRules?(this.registerRules=!1,this.registerChoose=["注册账户","登录"]):(this.registerRules=!0,this.registerChoose=["已有账号","注册"])},register:function(e){return Object(n["a"])(regeneratorRuntime.mark((function r(){var t,s,a,i,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t=e.name,s=e.username,a=e.email,i=e.password,n=e.userStatue,o=e.registrationTime,r.next=3,g["a"].SYS_USER_REGISTER({name:t,username:s,email:a,password:i,userStatue:n,registrationTime:o});case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),r)})))()},verify:function(e){return Object(n["a"])(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t=e.username,r.next=3,g["a"].SYS_VERIFY_API({username:t});case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),r)})))()},usernameReply:function(){var e=this;if(this.registerRules){var r=null;this.$refs.loginForm.validateField("username",(function(e){r=!e})),r&&this.verify({username:this.formLogin.username}).then((function(r){null!==r&&(40002===r.status?(e.$message.error(r.message),e.formLogin.username=""):40001===r.status&&(e.$message.error(r.data+"信息格式有误"),e.$notify.error(r.message)))}))}},submit:function(){var e=this;this.$refs.loginForm.validate((function(r){r?e.registerRules?e.register({name:e.formLogin.name,username:e.formLogin.username,email:e.formLogin.email,password:e.formLogin.password,userStatue:e.formLogin.userStatue,registrationTime:u()().format("YYYY-MM-DD HH:mm:ss")}).then((function(r){null===r?(e.registerRules=!1,e.registerChoose=["注册账户","登录"],e.$refs.loginForm.clearValidate(),e.formLogin={username:"",password:"",name:"",userStatue:1,email:"",code:"v9am"},e.$message({message:"注册成功",type:"success"})):40002===r.status&&(e.$message.error(r.message),e.$refs.loginForm.clearValidate(),e.formLogin={username:"",password:"",name:"",userStatue:null,email:"",code:"v9am"})})):e.login({username:e.formLogin.username,password:e.formLogin.password}).then((function(r){"object"===Object(i["a"])(r)&&e.$message.error(r.message),e.$router.replace(e.$route.query.redirect||"/")})):e.$message.error("表单校验失败，请检查")}))}})},f=p,d=(t("60d0"),t("2877")),h=Object(d["a"])(f,s,a,!1,null,null,null);r["default"]=h.exports},"60d0":function(e,r,t){"use strict";var s=t("2973"),a=t.n(s);a.a},"99c7":function(e,r,t){"use strict";t.r(r);var s=t("3547");r["default"]=s["default"]},a6b0:function(e,r,t){e.exports=t.p+"img/logo@2x.cbab1fa4.png"}}]);