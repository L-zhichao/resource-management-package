(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5fe9cbe2"],{1276:function(e,t,a){"use strict";var r=a("d784"),n=a("44e7"),i=a("825a"),s=a("1d80"),l=a("4840"),o=a("8aa5"),u=a("50c4"),c=a("14c3"),m=a("9263"),d=a("d039"),g=[].push,h=Math.min,p=4294967295,f=!d((function(){return!RegExp(p,"y")}));r("split",2,(function(e,t,a){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,a){var r=String(s(this)),i=void 0===a?p:a>>>0;if(0===i)return[];if(void 0===e)return[r];if(!n(e))return t.call(r,e,i);var l,o,u,c=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,f=new RegExp(e.source,d+"g");while(l=m.call(f,r)){if(o=f.lastIndex,o>h&&(c.push(r.slice(h,l.index)),l.length>1&&l.index<r.length&&g.apply(c,l.slice(1)),u=l[0].length,h=o,c.length>=i))break;f.lastIndex===l.index&&f.lastIndex++}return h===r.length?!u&&f.test("")||c.push(""):c.push(r.slice(h)),c.length>i?c.slice(0,i):c}:"0".split(void 0,0).length?function(e,a){return void 0===e&&0===a?[]:t.call(this,e,a)}:t,[function(t,a){var n=s(this),i=void 0==t?void 0:t[e];return void 0!==i?i.call(t,n,a):r.call(String(n),t,a)},function(e,n){var s=a(r,e,this,n,r!==t);if(s.done)return s.value;var m=i(e),d=String(this),g=l(m,RegExp),b=m.unicode,w=(m.ignoreCase?"i":"")+(m.multiline?"m":"")+(m.unicode?"u":"")+(f?"y":"g"),D=new g(f?m:"^(?:"+m.source+")",w),v=void 0===n?p:n>>>0;if(0===v)return[];if(0===d.length)return null===c(D,d)?[d]:[];var x=0,I=0,A=[];while(I<d.length){D.lastIndex=f?I:0;var R,y=c(D,f?d:d.slice(I));if(null===y||(R=h(u(D.lastIndex+(f?0:I)),d.length))===x)I=o(d,I,b);else{if(A.push(d.slice(x,I)),A.length===v)return A;for(var k=1;k<=y.length-1;k++)if(A.push(y[k]),A.length===v)return A;I=x=R}}return A.push(d.slice(x)),A}]}),!f)},"44e7":function(e,t,a){var r=a("861d"),n=a("c6b6"),i=a("b622"),s=i("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==n(e))}},"77ec":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-drawer",{attrs:{title:"物品损坏上报信息",visible:e.drawerVisible,size:"80%",direction:"btt"},on:{"update:visible":function(t){e.drawerVisible=t}}},[a("el-radio-group",{style:{marginLeft:"16px"},attrs:{size:"small"},on:{input:e.radioChange},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("el-radio-button",{attrs:{label:"待处理"}}),a("el-radio-button",{attrs:{label:"已处理"}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadAnimation,expression:"loadAnimation"}],key:e.randomKey,staticStyle:{width:"100%"},attrs:{data:e.tableData,"empty-text":"没有物品损坏或已全部完成处理"}},[a("el-table-column",{attrs:{prop:"damageRecordTime",label:"损坏日期",width:"140"}}),e.userAdministratorPermissions?a("el-table-column",{attrs:{prop:"username",label:"上报人",width:"140"}}):e._e(),a("el-table-column",{attrs:{prop:"itemName",label:"损坏物品",width:"140"}}),a("el-table-column",{attrs:{prop:"number",label:"损坏数量",width:"120"}}),a("el-table-column",{attrs:{prop:"damageRecordImgs",label:"图片",width:"360"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{attrs:{gutter:20}},e._l(t.row.imgs,(function(e,t){return a("el-col",{key:t,attrs:{span:4}},[a("el-popover",{staticClass:"images",attrs:{placement:"top",title:"",trigger:"hover"}},[a("img",{staticStyle:{height:"400px"},attrs:{src:e,alt:""}}),a("el-image",{staticStyle:{height:"40px"},attrs:{slot:"reference",src:e,"preview-src-list":[e]},slot:"reference"},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline"})])])],1)],1)})),1)]}}])}),a("el-table-column",{attrs:{prop:"damageRecordDesc",label:"描述"}}),e.userAdministratorPermissions?a("el-table-column",{attrs:{label:"操作",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return["待处理"===e.radio?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.finishDamageInformation(t.row)}}},[e._v("完成处理")]):e._e(),"已处理"===e.radio?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteDamageInformation(t.row)}}},[e._v("删除")]):e._e()]}}],null,!1,1823416659)}):e._e()],1)],1)},n=[],i=(a("4de4"),a("a9e3"),a("ac1f"),a("3ca3"),a("1276"),a("ddb0"),a("96cf"),a("1da1")),s=a("365c"),l=a("c276"),o={name:"showDamageItem",props:{drawerArouse:{type:Number,required:!0}},data:function(){return{tableData:[{damageRecordId:1,damageRecordDesc:"桌腿坏了",damageRecordTime:"2023-5-5",itemName:"桌子",username:"王五",damageRecordImg:"",imgs:[],damageRecordIsHandle:!1}],allTableData:{tableDataWait:[],tableDataFinish:[]},radio:"待处理",randomKey:Math.random(),loadAnimation:!1,drawerVisible:!1,userAdministratorPermissions:"0"===l["a"].cookies.get("userStatus")||!1}},watch:{drawerArouse:function(){this.loadAnimation=!0,this.userAdministratorPermissions&&this.itemSearchDamage({username:null}),this.userAdministratorPermissions||this.itemSearchDamage({username:l["a"].cookies.get("username")}),this.drawerVisible=!0},drawerVisible:function(){this.radio="待处理"}},methods:{handleClick:function(e){this.$emit("dialogChangeItem",e)},radioChange:function(e){var t=this;clearTimeout(this.radioChange_timeout),this.radio=e,this.loadAnimation=!0,this.radioChange_timeout=setTimeout((function(){"待处理"===t.radio?t.tableData=t.allTableData.tableDataWait:t.tableData=t.allTableData.tableDataFinish,t.loadAnimation=!1}),300)},showImgAPI:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].SHOW_IMG_API(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},itemSearchDamageAPI:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.username,null!==a){t.next=5;break}return t.next=4,s["a"].ITEM_SEARCH_DAMAGED_API();case 4:return t.abrupt("return",t.sent);case 5:if("string"!==typeof a){t.next=9;break}return t.next=8,s["a"].ITEM_SEARCH_DAMAGED_API({username:a});case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))()},itemSearchDamage:function(e){var t=this,a=e.username,r=void 0===a?null:a;this.itemSearchDamageAPI({username:r}).then(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(a){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("fail"!==a){e.next=5;break}return t.loadAnimation=!1,e.abrupt("return",t.$message.error("信息获取失败"));case 5:if(!(a.status>=4e4)){e.next=9;break}return t.loadAnimation=!1,t.$log.push({message:"错误代码:"+a.status+","+a.message,type:"warning"}),e.abrupt("return",t.$notify({title:a.message,message:"错误代码:"+a.status,position:"bottom-left",type:"warning"}));case 9:r=regeneratorRuntime.mark((function e(r){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a[r].imgs=a[r].damageRecordImg.split("//////////"),n=regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.showImgAPI(a[r].imgs[n]).then((function(e){a[r].imgs[n]=e}));case 2:case"end":return e.stop()}}),e)})),i=0;case 3:if(!(i<a[r].imgs.length)){e.next=8;break}return e.delegateYield(n(i),"t0",5);case 5:i++,e.next=3;break;case 8:case"end":return e.stop()}}),e)})),n=0;case 11:if(!(n<a.length)){e.next=16;break}return e.delegateYield(r(n),"t0",13);case 13:n++,e.next=11;break;case 16:return e.next=18,a.filter((function(e,t){if(!1===e.damageRecordIsHandle)return e.number=e.damageRecordDesc.split("//////////")[1],e.damageRecordDesc=e.damageRecordDesc.split("//////////")[0],e}));case 18:return t.allTableData.tableDataWait=e.sent,e.next=21,a.filter((function(e,t){if(!0===e.damageRecordIsHandle)return e.number=e.damageRecordDesc.split("//////////")[1],e.damageRecordDesc=e.damageRecordDesc.split("//////////")[0],e}));case 21:t.allTableData.tableDataFinish=e.sent,"待处理"===t.radio?t.tableData=t.allTableData.tableDataWait:t.tableData=t.allTableData.tableDataFinish,t.loadAnimation=!1;case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},itemDeleteDamageAPI:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.id,t.next=3,s["a"].ITEM_DELETE_DAMAGED_API({id:a});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()},itemDeleteDamage:function(e){var t=this,a=e.id;this.itemDeleteDamageAPI({id:a}).then((function(e){if(null===e)t.$message({message:"删除成功",type:"success"}),t.itemSearchDamage({username:null});else if("fail"===e)t.$message.error("删除失败");else if(e.status>=4e4)return t.$log.push({message:"错误代码:"+e.status+","+e.message,type:"warning"}),t.$notify({title:e.message,message:"错误代码:"+e.status,position:"bottom-left",type:"warning"})}))},itemFinishDamageAPI:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.id,t.next=3,s["a"].ITEM_FINISH_DAMAGED_API({id:a});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()},itemFinishDamage:function(e){var t=this,a=e.id;this.itemFinishDamageAPI({id:a}).then((function(e){if(null===e)t.$message({message:"处理成功",type:"success"}),t.itemSearchDamage({username:null});else if("fail"===e)t.$message.error("处理失败");else if(e.status>=4e4)return t.$log.push({message:"错误代码:"+e.status+","+e.message,type:"warning"}),t.$notify({title:e.message,message:"错误代码:"+e.status,position:"bottom-left",type:"warning"})}))},finishDamageInformation:function(e){this.itemFinishDamage({id:e.damageRecordId})},deleteDamageInformation:function(e){this.itemDeleteDamage({id:e.damageRecordId})}}},u=o,c=a("2877"),m=Object(c["a"])(u,r,n,!1,null,"bc528432",null);t["default"]=m.exports}}]);